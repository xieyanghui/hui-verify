(function(a){if(typeof define==="function"){if(define.amd){define("verify",["jquery"],a)}else{if(define.cmd){define(function(c,b,d){return a})}else{window.verify=a(window.jQuery)}}}else{window.verify=a(window.jQuery)}})(function(b){if(!b||!b.fn||!b.fn.jquery){console.log("请引用jQuery");return}var a=function(g,h,f,e){this.eem=g;this.name=f||"";this.megs=h||{};this.location=e};a.prototype={phone:function(){return this.regExp(/^1[3578]\d{9}$/,"phone")},noSczw:function(){return this.regExp(/^[0-9a-zA-Z \u4e00-\u9fa5]+$/,"noSczw")},noSpechars:function(){return this.regExp(/^[\w-]+$/,"noSpechars")},money:function(){return this.regExp(/^\d{1,10}(.\d)?\d?$/,"money")},email:function(){return this.regExp(/^\w+[\.\w]*\w+@\w+(\.\w{2,4}){1,2}$/,"email")},regExp:function(f,e){if(f.test(this.eem.val())){return this.output(true)}else{return this.output(false,e)}},contrast:function(e){var f=b(this.eem.parents("form").find("input[name='"+e+"']")).val();if(this.eem.val()===f){return this.output(true)}else{return this.output(false,"contrast")}},ajax:function(g){var h=this.eem.val();var f=this.eem.parents("form").attr("id")+"."+this.eem.attr("name");var e=this;b.post(g,{name:f,value:h},function(j,i){if(j.isNull){e.output(false,"ajax")}else{e.output(true)}});return true},length:function(f,e){if(typeof e==="undefined"){if(this.eem.val().length<f){return this.output(false,this.megs.length||this.name+"长度至少要"+f+"位")}}else{if(f===e&&this.eem.val().length!==f){return this.output(false,this.megs.length||this.name+"长度为"+f+"位")}else{if(this.eem.val().length<f||this.eem.val().length>e){return this.output(false,this.megs.length||this.name+"长度为"+f+"到 "+e+"位")}else{return this.output(true)}}}},"null":function(){if(this.eem.val()===""){return !this.output(true)}return true},noNull:function(){if(this.eem.val()==""){return this.output(false,"noNull")}else{return this.output(true)}},output:function(e,f){this.location.children("span[name='"+this.eem.attr("name")+"']").remove();var g=b("<span name='"+this.eem.attr("name")+"'>"+this.getMeg(f||"success")+"</span>");var h=this.eem.parents("form");if(e){if(h.length>0){h.attr("ver_err",h.attr("ver_err").replace(this.eem.attr("name"),""))}this.location.append(g.addClass("verify_su"));return true}else{if(h.length>0&&h.attr("ver_err").indexOf(this.eem.attr("name"))===-1){h.attr("ver_err",h.attr("ver_err")+" "+this.eem.attr("name"))}this.location.append(g.addClass("verify_er"));return false}},megsp:{length:"长度为 到 位",noNull:"不能为空！",email:"格式不对， 列：xx@126.com",noSpechars:"不能使用中文或特殊字符",phone:"格式不对     列：13888888888",ajax:"已存在",contrast:"不一致",noSczw:"不能使用特殊字符",money:"数字格式不对 如 :147.55"},getMeg:function(e){if(this.megs[e]){return this.megs[e]}if(this.megsp[e]){return this.name+this.megsp[e]}if(e==="success"){return""}return e}};var c=function(g,h){if(!h){return}var f=h.location||null;if(d(f)){f=f.apply(g)}else{if(typeof f==="string"){if(/^\w/.test(f)){f=b("#"+f)}else{f=b(f)}f=b(f)}}if(f==null){f=b('<div class="verify_megs"></div>');g.after(f)}console.log(f);h.location=f;h.method=h.method||"blur";var e=new a(g,h.megs,h.name,h.location);g.bind(h.method,function(){if(!g.is(":visible")){console.log(g.attr("name")+"没有显示所以不验证");return}var l=h.check;if(l.indexOf("null")==-1){l.unshift("noNull")}else{l.splice(l.indexOf("null"),1);l.unshift("null")}for(var k in l){if(typeof(l[k])==="object"){var i=false;for(var j in l[k]){if(!a.prototype.hasOwnProperty(j)){console.log(j+"方法不存在");continue}else{if(!e[j].apply(e,l[k][j])){i=true;break}}}if(i){break}}else{if(!e[l[k]]()){break}}}})};var d=function(e){return !!e&&!e.nodeName&&e.constructor!=String&&e.constructor!=RegExp&&e.constructor!=Array&&/function/i.test(e+"")};return{fn:function(f,e,g){a.prototype[f]=e;a.prototype.megsp[f]=g||""},verifyInput:function(e,f){if(typeof e==="string"){if(/^\w/.test(e)){e=b("#"+e)}else{e=b(e)}}c(e,f)},verifyForm:function(k,i,g,e,l){var h=b("#"+k);if(h.length<1||b.nodeName(h,"form")||i==null){console.log("id不存在或不是form");return}h.attr("ver_err","");for(var j in i){var f=h.find("input[name='"+j+"']");if(f.length<1){console.log(j+"该元素不存在于表单里");continue}if(typeof i[j]["location"]==="undefined"){i[j]["location"]=e}if(typeof i[j]["method"]==="undefined"){i[j]["method"]=l}c(f,i[j])}h.submit(function(){for(var o in i){var n=h.find("input[name='"+o+"']");if(n.length<1){console.log(o+"该元素不存在于表单里");continue}n.trigger(i[o]["method"])}if(typeof h.attr("ver_err")!=="undefined"&&h.attr("ver_err").trim()!==""){return false}if(g){var m=g.success||null;if(typeof g.before!=="undefined"&&g.before()===false){return false}b.ajax({url:h.attr("action"),data:h.serialize(),type:"POST",global:false,dataType:"json",success:m});return false}else{return true}})}}});